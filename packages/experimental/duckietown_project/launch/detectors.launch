<?xml version="1.0" encoding="utf-8"?>
<launch>
    <arg name="apriltags" default="false"/>
	<arg name="config" default="baseline" />
	<arg name="param_file_name" default="default" />

    <group if="$(arg apriltags)">
        <!-- Detector node -->
        <remap from="apriltag_detector_node/image" to="camera_node/image/compressed" />
        <remap from="apriltag_detector_node/camera_info" to="camera_node/camera_info" />
        <include file="$(find apriltag)/launch/apriltag_detector_node.launch">
            <arg name="veh" value="$(env VEHICLE_NAME)"/>
        </include>

        <!-- Postprocessing node -->
        <remap from="apriltag_postprocessing_node/detections" to="apriltag_detector_node/detections" />
        <include file="$(find apriltag)/launch/apriltag_postprocessing_node.launch">
            <arg name="veh" value="$(env VEHICLE_NAME)"/>
            <arg name="config" value="$(arg config)"/>
            <arg name="param_file_name" value="$(arg param_file_name)"/>
        </include>
    </group>

    <include file="$(find object_detection)/launch/object_detector_node.launch">
        <arg name="veh" value="$(env VEHICLE_NAME)"/>
    </include>

</launch>